{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import'./App.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_URL='http://localhost:8000';function App(){const[messages,setMessages]=useState([]);const[input,setInput]=useState('');const[isLoading,setIsLoading]=useState(false);const messagesEndRef=useRef(null);const fileInputRef=useRef(null);useEffect(()=>{var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:'smooth'});},[messages]);const sendMessage=async e=>{e.preventDefault();if(!input.trim()||isLoading)return;const userMessage={role:'user',content:input};setMessages(prev=>[...prev,userMessage]);setInput('');setIsLoading(true);try{const response=await fetch(\"\".concat(API_URL,\"/chat\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({message:input})});const data=await response.json();setMessages(prev=>[...prev,{role:'assistant',content:data.response}]);}catch(error){setMessages(prev=>[...prev,{role:'assistant',content:'Error: Could not reach the server.'}]);}finally{setIsLoading(false);}};const handleFileUpload=async e=>{const file=e.target.files[0];if(!file)return;const formData=new FormData();formData.append('file',file);try{const response=await fetch(\"\".concat(API_URL,\"/upload\"),{method:'POST',body:formData});if(response.ok){setMessages(prev=>[...prev,{role:'system',content:\"File \\\"\".concat(file.name,\"\\\" uploaded successfully.\")}]);}else{setMessages(prev=>[...prev,{role:'system',content:\"Failed to upload \\\"\".concat(file.name,\"\\\".\")}]);}}catch(error){setMessages(prev=>[...prev,{role:'system',content:'Error: Could not upload file.'}]);}fileInputRef.current.value='';};return/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Semantic Search Agent\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",ref:fileInputRef,onChange:handleFileUpload,style:{display:'none'}}),/*#__PURE__*/_jsx(\"button\",{className:\"upload-btn\",onClick:()=>fileInputRef.current.click(),children:\"Upload Book\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"messages\",children:[messages.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"empty-state\",children:\"Ask me anything about your books!\"}),messages.map((msg,idx)=>/*#__PURE__*/_jsx(\"div\",{className:\"message \".concat(msg.role),children:/*#__PURE__*/_jsx(\"div\",{className:\"message-content\",children:msg.content})},idx)),isLoading&&/*#__PURE__*/_jsx(\"div\",{className:\"message assistant\",children:/*#__PURE__*/_jsx(\"div\",{className:\"message-content\",children:\"Thinking...\"})}),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"input-form\",onSubmit:sendMessage,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:input,onChange:e=>setInput(e.target.value),placeholder:\"Type your message...\",disabled:isLoading}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:isLoading||!input.trim(),children:\"Send\"})]})]})]});}export default App;","map":{"version":3,"names":["React","useState","useRef","useEffect","jsx","_jsx","jsxs","_jsxs","API_URL","App","messages","setMessages","input","setInput","isLoading","setIsLoading","messagesEndRef","fileInputRef","_messagesEndRef$curre","current","scrollIntoView","behavior","sendMessage","e","preventDefault","trim","userMessage","role","content","prev","response","fetch","concat","method","headers","body","JSON","stringify","message","data","json","error","handleFileUpload","file","target","files","formData","FormData","append","ok","name","value","className","children","type","ref","onChange","style","display","onClick","click","length","map","msg","idx","onSubmit","placeholder","disabled"],"sources":["/Users/frueda/PycharmProjects/agentic-playground/semantic-search-ui/src/App.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport './App.css';\n\nconst API_URL = 'http://localhost:8000';\n\nfunction App() {\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const messagesEndRef = useRef(null);\n  const fileInputRef = useRef(null);\n\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages]);\n\n  const sendMessage = async (e) => {\n    e.preventDefault();\n    if (!input.trim() || isLoading) return;\n\n    const userMessage = { role: 'user', content: input };\n    setMessages((prev) => [...prev, userMessage]);\n    setInput('');\n    setIsLoading(true);\n\n    try {\n      const response = await fetch(`${API_URL}/chat`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ message: input }),\n      });\n      const data = await response.json();\n      setMessages((prev) => [...prev, { role: 'assistant', content: data.response }]);\n    } catch (error) {\n      setMessages((prev) => [...prev, { role: 'assistant', content: 'Error: Could not reach the server.' }]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleFileUpload = async (e) => {\n    const file = e.target.files[0];\n    if (!file) return;\n\n    const formData = new FormData();\n    formData.append('file', file);\n\n    try {\n      const response = await fetch(`${API_URL}/upload`, {\n        method: 'POST',\n        body: formData,\n      });\n      if (response.ok) {\n        setMessages((prev) => [...prev, { role: 'system', content: `File \"${file.name}\" uploaded successfully.` }]);\n      } else {\n        setMessages((prev) => [...prev, { role: 'system', content: `Failed to upload \"${file.name}\".` }]);\n      }\n    } catch (error) {\n      setMessages((prev) => [...prev, { role: 'system', content: 'Error: Could not upload file.' }]);\n    }\n    fileInputRef.current.value = '';\n  };\n\n  return (\n    <div className=\"app\">\n      <header className=\"header\">\n        <h1>Semantic Search Agent</h1>\n        <input type=\"file\" ref={fileInputRef} onChange={handleFileUpload} style={{ display: 'none' }} />\n        <button className=\"upload-btn\" onClick={() => fileInputRef.current.click()}>Upload Book</button>\n      </header>\n\n      <div className=\"chat-container\">\n        <div className=\"messages\">\n          {messages.length === 0 && <div className=\"empty-state\">Ask me anything about your books!</div>}\n          {messages.map((msg, idx) => (\n            <div key={idx} className={`message ${msg.role}`}>\n              <div className=\"message-content\">{msg.content}</div>\n            </div>\n          ))}\n          {isLoading && <div className=\"message assistant\"><div className=\"message-content\">Thinking...</div></div>}\n          <div ref={messagesEndRef} />\n        </div>\n\n        <form className=\"input-form\" onSubmit={sendMessage}>\n          <input\n            type=\"text\"\n            value={input}\n            onChange={(e) => setInput(e.target.value)}\n            placeholder=\"Type your message...\"\n            disabled={isLoading}\n          />\n          <button type=\"submit\" disabled={isLoading || !input.trim()}>Send</button>\n        </form>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}